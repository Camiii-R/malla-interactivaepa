<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Interactiva EPA </title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: url('https://i.imgur.com/E0Luy3I.png') repeat;
      background-size: 300px;
    }

    h1 {
      text-align: center;
      padding: 20px;
      background-color: #ffd6ec;
      margin: 0;
      font-size: 28px;
      color: #5c2a4a;
    }

    .malla {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      padding: 20px;
      gap: 20px;
    }

    .semestre {
      background: #fff8f5;
      border: 2px solid #ffc0cb;
      border-radius: 16px;
      padding: 15px;
      min-width: 220px;
      flex-shrink: 0;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .semestre h2 {
      font-size: 16px;
      margin-top: 0;
      color: #b24971;
    }

    .ramo {
      padding: 6px 10px;
      margin: 5px 0;
      border-radius: 8px;
      cursor: pointer;
      background-color: #f0f0f0;
      border: 1px solid #ccc;
      transition: transform 0.2s;
    }

    .ramo:hover {
      transform: scale(1.02);
    }

    .aprobado {
      background-color: #90ee90 !important;
    }

    .bloqueado {
      background-color: #d3d3d3 !important;
      pointer-events: none;
      opacity: 0.6;
    }

    /* Leyenda flotante */
    .leyenda-flotante {
      position: fixed;
      top: 100px;
      right: 30px;
      background-color: #fff8e7;
      border: 2px solid #f4d47c;
      padding: 12px;
      border-radius: 16px;
      width: 180px;
      z-index: 1000;
      font-family: 'Segoe UI', sans-serif;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .toggle-leyenda {
      background-color: #fddca5;
      border: none;
      border-radius: 10px;
      padding: 6px 10px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      width: 100%;
      margin-bottom: 10px;
      color: #5c4e2f;
    }

    .contenido-leyenda ul {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    .contenido-leyenda li {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-size: 14px;
      color: #444;
    }

    .color-box {
      display: inline-block;
      width: 18px;
      height: 18px;
      margin-right: 8px;
      border-radius: 4px;
      border: 1px solid #aaa;
    }

    .color-box.aprobado {
      background-color: #90ee90;
    }

    .color-box.no-aprobado {
      background-color: #f0f0f0;
    }

    .color-box.bloqueado {
      background-color: #d3d3d3;
    }

    @media (max-width: 600px) {
      .leyenda-flotante {
        width: auto;
        right: 10px;
        top: auto;
        bottom: 20px;
        padding: 8px;
      }

      .contenido-leyenda {
        display: none;
      }

      .leyenda-flotante.open .contenido-leyenda {
        display: block;
      }
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva Educaci贸n Parvularia Ц</h1>

  <div class="malla" id="malla"></div>

  <div class="leyenda-flotante" id="leyendaFlotante">
    <button class="toggle-leyenda" onclick="toggleLeyenda()"> Leyenda</button>
    <div class="contenido-leyenda" id="contenidoLeyenda">
      <ul>
        <li><span class="color-box aprobado"></span> Aprobado</li>
        <li><span class="color-box no-aprobado"></span> Disponible</li>
        <li><span class="color-box bloqueado"></span> Bloqueado</li>
      </ul>
    </div>
  </div>

  <script>
    const ramos = {
      "Primer a帽o - Semestre I": [
        "Fundamento de la educaci贸n parvularia",
        "Pensamiento pedag贸gico, persona y sociedad",
        "Lenguajes art铆sticos I: Arte y literatura",
        "Bases psicoling眉铆sticas para el aprendizaje",
        "Aprendizaje humano"
      ],
      "Primer a帽o - Semestre II": [
        "Pol铆ticas p煤blicas y escenarios educativos",
        "Lenguajes art铆sticos II: M煤sica y motricidad",
        "Habilidades comunicativas en el p谩rvulo",
        "Factores cognitivos y socioafectivos del aprendizaje",
        "Dise帽o y adaptaci贸n curricular",
        "Electivo Antropol贸gico"
      ],
      "Segundo a帽o - Semestre III": [
        "Taller pedag贸gico I",
        "Planificaci贸n y evaluaci贸n del proceso de educativo",
        "Did谩ctica del lenguaje",
        "Construcci贸n del pensamiento l贸gico matem谩tico",
        "Evaluaci贸n y retroalimentaci贸n para el aprendizaje",
        "Electivo teol贸gico"
      ],
      "Segundo a帽o - Semestre IV": [
        "Taller pedag贸gico II",
        "Did谩ctica de las matem谩ticas",
        "Lenguajes art铆sticos integrados",
        "Formaci贸n ciudadana en el p谩rvulo",
        "Corporalidad y movimiento",
        "Evaluaci贸n integrada I"
      ],
      "Tercer a帽o - Semestre V": [
        "Taller pedag贸gico III",
        "Did谩ctica de las CS. sociales",
        "Salud del p谩rvulo",
        "Construcci贸n del pensamiento cient铆fico",
        "Seminario de ense帽anza en aulas diversas",
        "Tic para el aprendizaje",
        "Electivo para la diversidad"
      ],
      "Tercer a帽o - Semestre VI": [
        "Taller Pedag贸gico IV",
        "Did谩ctica de CS. naturales",
        "Familia y su integraci贸n",
        "Programas y exp. educativas",
        "Gesti贸n educativa",
        "Electivo para la diversidad"
      ],
      "Cuarto a帽o - Semestre VII": [
        "Taller pedag贸gico V",
        "Investigaci贸n educativa",
        "Trabajo pedag贸gico en contextos diversos",
        "Competencias en interculturalidad",
        "Dise帽o y evaluaci贸n de proyectos",
        "Desarrollo de las competencias emocionales del p谩rvulo",
        "Evaluaci贸n integrada II"
      ],
      "Cuarto a帽o - Semestre VIII": [
        "Internado pedag贸gico",
        "Seminario",
        "tico profesional"
      ]
    };

    const prerequisitos = {
      "Pol铆ticas p煤blicas y escenarios educativos": ["Pensamiento pedag贸gico, persona y sociedad"],
      "Lenguajes art铆sticos II: M煤sica y motricidad": ["Lenguajes art铆sticos I: Arte y literatura"],
      "Factores cognitivos y socioafectivos del aprendizaje": ["Aprendizaje humano"],
      "Dise帽o y adaptaci贸n curricular": ["Aprendizaje humano"],
      "Evaluaci贸n y retroalimentaci贸n para el aprendizaje": ["Aprendizaje humano", "Dise帽o y adaptaci贸n curricular"],
      "Did谩ctica del lenguaje": ["Habilidades comunicativas en el p谩rvulo"],
      "Did谩ctica de las matem谩ticas": ["Construcci贸n del pensamiento l贸gico matem谩tico", "Did谩ctica del lenguaje"],
      "Taller pedag贸gico II": ["Taller pedag贸gico I"],
      "Lenguajes art铆sticos integrados": ["Lenguajes art铆sticos II: M煤sica y motricidad"],
      "Taller pedag贸gico III": ["Taller pedag贸gico II", "Taller pedag贸gico I"],
      "Did谩ctica de las CS. sociales": ["Formaci贸n ciudadana en el p谩rvulo", "Did谩ctica de las matem谩ticas"],
      "Taller Pedag贸gico IV": ["Taller pedag贸gico III", "Taller pedag贸gico II", "Taller pedag贸gico I"],
      "Taller pedag贸gico V": ["Taller Pedag贸gico IV", "Taller pedag贸gico III", "Taller pedag贸gico II", "Taller pedag贸gico I"],
      "Trabajo pedag贸gico en contextos diversos": ["Familia y su integraci贸n"],
      "Competencias en interculturalidad": ["Programas y exp. educativas"],
      "Internado pedag贸gico": ["Taller pedag贸gico V", "Taller Pedag贸gico IV", "Taller pedag贸gico III", "Taller pedag贸gico II", "Taller pedag贸gico I"],
      "Seminario": ["Investigaci贸n educativa"]
    };

    const estado = JSON.parse(localStorage.getItem("estadoRamos") || "{}");

    function crearMalla() {
      const contenedor = document.getElementById("malla");
      contenedor.innerHTML = "";

      for (const [semestre, cursos] of Object.entries(ramos)) {
        const div = document.createElement("div");
        div.className = "semestre";
        const h2 = document.createElement("h2");
        h2.textContent = semestre;
        div.appendChild(h2);

        cursos.forEach(ramo => {
          const r = document.createElement("div");
          r.className = "ramo";
          r.textContent = ramo;

          const requisitos = prerequisitos[ramo] || [];
          const cumplidos = requisitos.every(pr => estado[pr]);
          if (requisitos.length > 0 && !cumplidos) {
            r.classList.add("bloqueado");
          }

          if (estado[ramo]) {
            r.classList.add("aprobado");
          }

          r.addEventListener("click", () => {
            if (r.classList.contains("bloqueado")) return;
            r.classList.toggle("aprobado");
            estado[ramo] = r.classList.contains("aprobado");
            localStorage.setItem("estadoRamos", JSON.stringify(estado));
            crearMalla();
          });

          div.appendChild(r);
        });

        contenedor.appendChild(div);
      }
    }

    function toggleLeyenda() {
      document.getElementById("leyendaFlotante").classList.toggle("open");
    }

    crearMalla();
  </script>
</body>
</html>
